ROUTER, REAL_SERVER Configuration

STEP 1 — Bring ALL Router Interfaces UP

On the Router, run:

sudo ip link set ens3 up
sudo ip link set ens4 up
sudo ip link set ens5 up
sudo ip link set ens6 up
sudo ip link set ens7 up


STEP 2 — Assign IPv4 Addresses (CORRECTLY)

Now add the IPs:

sudo ip addr add 10.0.0.1/24 dev ens3
sudo ip addr add 10.0.1.1/24 dev ens4
sudo ip addr add 10.0.2.1/24 dev ens5
sudo ip addr add 10.0.3.1/24 dev ens6
sudo ip addr add 10.0.4.1/24 dev ens7

STEP 3 — Enable IP Forwarding (CRITICAL)
sudo sysctl -w net.ipv4.ip_forward=1


Verify:

sysctl net.ipv4.ip_forward


It must show:

= 1

STEP 4 — VERIFY ROUTER CONFIG (DO THIS)

Run:

ip addr
ip route


You should now see:

10.0.0.1 on ens3

10.0.1.1 on ens4

10.0.2.1 on ens5

Configure the REAL SERVER

Step 1 — Assign IP Address

On Real Server (ubuntu-cloud):

sudo ip addr add 10.0.1.10/24 dev ens3
sudo ip link set ens3 up

Step 2 — Set Default Gateway

sudo ip route add default via 10.0.1.1

Step 3 — Verify Configuration
Run:

ip addr show ens3
ip route

You should now see:

inet 10.0.1.10/24

default via 10.0.1.1

Test Connectivity (In This Order)
From Real Server:
ping 10.0.1.1

It must work

From Router:
ping 10.0.1.10

It must work

From Attacker PC:
PC1> ping 10.0.1.10

It must work

Capture Packets (traffic.pcap)

On the Router, start capture:

sudo tcpdump -i any -w traffic.pcap

Leave this running.

Generate Normal Traffic

From PC1(Attacker) only:

ping 10.0.1.10

(let it run once, 5 packets)

Generate Suspicious / Attack Traffic

From all the PC's at the same time:

ping 10.0.1.10

This simulates distributed traffic.

Stop Capture

On Router:

CTRL + C


You will now have:

traffic.pcap